webpackJsonp([25],{Dudy:function(e,t){},k5DZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Xxa5"),r=a.n(s),n=a("exGp"),i=a.n(n),o=a("woOf"),l=a.n(o),c=a("//Fk"),u=a.n(c),p=a("mvHQ"),d=a.n(p),m=a("mw3O"),h=a.n(m),b=a("mtWM"),x=a.n(b),v=(a("As0g"),a("vQVM"),a("vOX5"),a("TQvf")),_={name:"ajax",data:function(){var e=this;return{methods:["POST","GET"],currentMethod:"POST",currentTabName:"",split:.4,allFontSize:["10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30"],selectedFontSize:"14",blankHeadersLine:{active:!0,key:"",value:""},blankParamsLine:{active:!0,key:"",value:""},blankAjaxTab:{ban:!1,windowName:"新窗口",type:"ajax",method:"POST",url:"",paramsType:"row",headersType:"row",headers:[{active:!0,key:"",value:""}],params:[{active:!0,key:"",value:""}],textParams:"",textHeaders:"",response:""},ajaxTabs:[],jsonStr:"",currentJson:"",currentJsonStr:"",labelParams:function(t){return t("div",[t("span","Params"),t("Select",{props:{transfer:!0,value:e.ajaxTabs[Number(e.currentIndex)].paramsType},class:"select_in_label",style:{maxWidth:"70px"},on:{"on-change":function(t){e.ajaxTabs[Number(e.currentIndex)].paramsType=t}}},[t("i-option",{props:{value:"row"}},"row"),t("i-option",{props:{value:"text"}},"text")])])},labelHeaders:function(t){return t("div",[t("span","Headers"),t("Select",{props:{transfer:!0,value:e.ajaxTabs[Number(e.currentIndex)].headersType},class:"select_in_label",style:{maxWidth:"70px"},on:{"on-change":function(t){e.ajaxTabs[Number(e.currentIndex)].headersType=t}}},[t("i-option",{props:{value:"row"}},"row"),t("i-option",{props:{value:"text"}},"text")])])}}},computed:{bodyStyles:function(){return this.$store.state.bodyStyles},ajaxContainerStyles:function(){return{height:this.bodyStyles.height-65+"px"}},ajaxTabNames:function(){for(var e={},t=0;t<this.ajaxTabs.length-1;t++)e.hasOwnProperty(t)||(e[String(t)]=t);return e},currentIndex:function(){for(var e=0,t=0;t<this.ajaxTabs.length;t++)this.ajaxTabs[t].name===this.currentTabName&&(e=t,t=this.ajaxTabs.length);return e},activeCounts:function(){for(var e=0,t=0;t<this.ajaxTabs.length-1;t++)this.ajaxTabs[t].ban||(e+=1);return e},formatJsonStr:function(){var e="";if(""!==this.ajaxTabs[Number(this.currentIndex)].response){var t=this.ajaxTabs[Number(this.currentIndex)].response;try{this.currentJson=jsonlint.parse(t),this.currentJsonStr=d()(this.currentJson),e=new JSONFormat(t,4).toString()}catch(t){e='<span style="color: #f1592a; font-weight: bold;">'+t+"</span>",this.currentJsonStr=e}return e}return""}},created:function(){this.ajaxTabs.push(this.getANewTab()),this.ajaxTabs.push({ban:!1,type:"plus"});var e=this;this.$nextTick(function(){var t=new v(".copy-format-json",{});t.on("success",function(t){if(""!==t.text.trim()){var a="";"copy"===t.action?a="复制成功":"cut"===t.action&&(a="剪切成功"),e.$Message.success(a)}}),t.on("error",function(t){if(""!==t.text.trim()){var a="";"copy"===t.action?a="复制失败":"cut"===t.action&&(a="剪切失败"),e.$Message.error(a)}})})},mounted:function(){var e=this;window.onkeydown=function(t){if(9===t.keyCode&&"ajax"===e.$route.name)return t.preventDefault(),!1}},methods:{getANewTab:function(){var e=JSON.parse(d()(this.blankAjaxTab));return e.hasOwnProperty("name")||(e.name=this.getUUID()),e},handleBeforeTabRemove:function(e){var t=this;return new u.a(function(e,a){t.ajaxTabs.length<=2&&a(!1),e()})},handleTabsAdd:function(){this.ajaxTabs.splice(this.ajaxTabs.length-1,0,this.getANewTab())},changeAjaxTab:function(e){"plus"===e&&(this.handleTabsAdd(),this.currentTabName=this.ajaxTabs[this.ajaxTabs.length-2].name,document.querySelector(".ivu-tabs-nav-scroll").scrollTo(1e4,0))},findIndexByName:function(e){for(var t=-1,a=0;a<this.ajaxTabs.length-1;a++)e===this.ajaxTabs[a].name&&(t=a,a=this.ajaxTabs.length);return t},findPrevActive:function(e){for(var t=-1,a=Number(e)-1;a>-1;a--)this.ajaxTabs[a].ban||(t=a,a=-1);return t},removeAjaxTab:function(e){var t=this.findIndexByName(e);if(t>-1&&this.ajaxTabs.splice(t,1,l()({},this.ajaxTabs[t],{ban:!0})),"plus"===this.currentTabName)if(t>0){var a=this.findPrevActive(t);a>-1&&(this.currentTabName=this.ajaxTabs[a].name)}else 0===t&&(this.currentTabName=this.ajaxTabs[0].name)},addRequestLine:function(e){if(e.target.dataset.type){switch(e.target.dataset.type.toLowerCase()){case"headers":this.ajaxTabs[Number(this.currentIndex)].headers.push(JSON.parse(d()(this.blankHeadersLine)));break;case"params":this.ajaxTabs[Number(this.currentIndex)].params.push(JSON.parse(d()(this.blankParamsLine)))}setTimeout(function(){document.querySelector(".request_inner").scrollTo(0,1e4)},20)}},removeRequestLine:function(e){if(e.target.dataset.type)switch(e.target.dataset.type.toLowerCase()){case"headers":this.ajaxTabs[Number(this.currentIndex)].headers.splice(Number(e.target.dataset.index),1);break;case"params":this.ajaxTabs[Number(this.currentIndex)].params.splice(Number(e.target.dataset.index),1)}},getRowHeaders:function(){for(var e=this.ajaxTabs[Number(this.currentIndex)].headers,t={},a=0;a<e.length;a++)e[a].active&&""!==e[a].key.trim()&&(t[e[a].key]=e[a].value);return t},getHeaders:function(){var e={};switch(this.ajaxTabs[Number(this.currentIndex)].headersType.toLowerCase()){case"row":e=this.getRowHeaders();break;case"text":e=this.getTextHeaders()}return e},getTextHeaders:function(){var e={},t=this.ajaxTabs[Number(this.currentIndex)].textHeaders;if(t&&""!==t.trim())if((t=t.replace(/\r/gi,"").replace(/\n|\s/gi,"")).match(/['"]/g))try{e=JSON.parse(t)}catch(t){e={}}else e=this.getFormatParamsObj(t);return e},getRowParams:function(){for(var e={},t=this.ajaxTabs[Number(this.currentIndex)].params,a=0;a<t.length;a++)t[a].active&&""!==t[a].key.trim()&&(e[t[a].key]=t[a].value);return e},formatUrlParams:function(e){for(var t={},a=e.split("&"),s=0;s<a.length;s++)t.hasOwnProperty(a[s].split("=")[0])||(t[a[s].split("=")[0]]=a[s].split("=")[1]);return t},getFormatParamsObj:function(e){var t="";if(e.indexOf("?")<0){if(e.indexOf("&")<0){if(e.indexOf("=")>0){var a={};return a[e.split("=")[0]]=e.split("=")[1],new JSONFormat(d()(a),4).toString()}return new JSONFormat("{}",4).toString()}t=e}else t=e.split("?")[1];return this.formatUrlParams(t)},getTextParams:function(){var e={},t=this.ajaxTabs[Number(this.currentIndex)].textParams;if(t&&""!==t.trim())if((t=t.replace(/\r/gi,"").replace(/\n|\s/gi,"")).match(/['"]/g))try{e=JSON.parse(t)}catch(t){e={}}else e=this.getFormatParamsObj(t);return e},getParams:function(){var e={};switch(this.ajaxTabs[Number(this.currentIndex)].paramsType.toLowerCase()){case"row":e=this.getRowParams();break;case"text":e=this.getTextParams()}return e},submit:function(){var e=this;return i()(r.a.mark(function t(){var a,s,n,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.ajaxTabs[Number(e.currentIndex)],s={url:a.url,method:a.method.toLowerCase()},n=e.getParams(),e.isEmptyObject(n)||("get"===a.method.toLowerCase()?s.params=n:s.data=n),i=e.getHeaders(),e.isEmptyObject(i)||(s.headers=i),e.ajax(s).then(function(e){200===e.status&&200===e.data.status?a.response=d()(e.data.data):a.response=d()(e.data)}).catch(function(t){e.$Message.error(t.message)});case 7:case"end":return t.stop()}},t,e)}))()},ajax:function(e){var t=this;return new u.a(function(a,s){e.url&&""!==e.url.trim()||s(new Error("url不能为空")),e.url.match(/^\/\//)?e.url="http://"+e.url.replace(/^\/\//,""):e.url.match(/^http(s?):\/\//)||(e.url="http://"+e.url),t.isEmptyObject(e.params)||"get"!==e.method.toLowerCase()||(e.url.indexOf("?")>0?e.url+="&"+h.a.stringify(e.params):e.url+="?"+h.a.stringify(e.params),delete e.params),t.isEmptyObject(e.data)||(e.data=h.a.stringify(e.data)),t.isEmptyObject(e.headers)||(e.headers=h.a.stringify(e.headers));var r={url:"https://talkapi.dei2.com/Zpm/cli/a",method:"POST",data:h.a.stringify(e)};x()(r).then(function(e){var t=e.data;a(t)}).catch(function(e){s(new Error(e.message))})})},changeFontSize:function(e){this.selectedFontSize=e}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ajax_container",style:e.ajaxContainerStyles},[a("div",{staticClass:"ajax_inner"},[e._m(0),e._v(" "),a("Tabs",{staticClass:"ajax_tabs",attrs:{type:"card",closable:e.activeCounts>1},on:{"on-tab-remove":e.removeAjaxTab,"on-click":e.changeAjaxTab},model:{value:e.currentTabName,callback:function(t){e.currentTabName=t},expression:"currentTabName"}},e._l(e.ajaxTabs,function(t,s){return t.ban?e._e():a("TabPane",{key:s,attrs:{name:"ajax"===t.type?t.name:t.type,label:"ajax"===t.type?"新窗口"===t.windowName&&t.url.slice(0,10)||t.windowName:"+"}},["ajax"===t.type?a("div",{staticClass:"ajax_row"},[a("Input",{attrs:{size:"large",placeholder:"请输入请求url"},model:{value:e.ajaxTabs[e.currentIndex].url,callback:function(t){e.$set(e.ajaxTabs[e.currentIndex],"url",t)},expression:"ajaxTabs[currentIndex].url"}},[a("Select",{staticStyle:{width:"100px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.ajaxTabs[e.currentIndex].method,callback:function(t){e.$set(e.ajaxTabs[e.currentIndex],"method",t)},expression:"ajaxTabs[currentIndex].method"}},e._l(e.methods,function(t,s){return a("Option",{key:s,attrs:{value:t}},[e._v(e._s(t))])})),e._v(" "),a("Button",{attrs:{slot:"append",type:"primary"},on:{click:e.submit},slot:"append"},[e._v("发送")])],1)],1):e._e(),e._v(" "),a("div",{staticClass:"ajax_body_container"},[a("Split",{attrs:{mode:"vertical"},model:{value:e.split,callback:function(t){e.split=t},expression:"split"}},[a("div",{staticClass:"demo-split-pane",attrs:{slot:"top"},slot:"top"},[a("div",{staticClass:"ajax_request_container"},[a("Tabs",{staticStyle:{height:"100%"},attrs:{size:"small"}},[a("TabPane",{attrs:{label:e.labelParams}},["row"===t.paramsType?a("div",{key:"type1",staticClass:"request_inner"},[a("Row",{staticClass:"header_row"},[a("Col",{staticClass:"cell_item cell_item_first",attrs:{span:1}}),e._v(" "),a("Col",{staticClass:"cell_item",attrs:{span:11}},[e._v("Key")]),e._v(" "),a("Col",{staticClass:"cell_item",attrs:{span:11}},[e._v("Value")]),e._v(" "),a("Col",{staticClass:"cell_item cell_item_last",attrs:{span:1}})],1),e._v(" "),e._l(t.params,function(s,r){return a("Row",{key:r},[a("Col",{staticClass:"cell_item cell_item_first",attrs:{span:1}},[a("Checkbox",{model:{value:s.active,callback:function(t){e.$set(s,"active",t)},expression:"p.active"}})],1),e._v(" "),a("Col",{staticClass:"cell_item",attrs:{span:11}},[a("Input",{staticClass:"no_border_input",attrs:{type:"text",placeholder:"请输入key"},model:{value:s.key,callback:function(t){e.$set(s,"key",t)},expression:"p.key"}})],1),e._v(" "),a("Col",{staticClass:"cell_item",attrs:{span:11}},[a("Input",{staticClass:"no_border_input",attrs:{type:"text",placeholder:"请输入value"},model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"p.value"}})],1),e._v(" "),a("Col",{staticClass:"cell_item cell_item_last",attrs:{span:1}},[r<t.params.length-1?a("Icon",{staticClass:"item_remove_icon",attrs:{type:"ios-close",size:"20","data-index":r,"data-type":"params"},on:{click:e.removeRequestLine}}):e._e(),e._v(" "),r===t.params.length-1?a("Icon",{staticClass:"item_add_icon",attrs:{type:"ios-add",size:"20","data-type":"params"},on:{click:e.addRequestLine}}):e._e()],1)],1)})],2):a("div",{key:"type2",staticClass:"request_inner"},[a("Input",{staticClass:"request_inner_textarea",attrs:{type:"textarea",placeholder:"请输入请求参数"},model:{value:t.textParams,callback:function(a){e.$set(t,"textParams",a)},expression:"item.textParams"}})],1)]),e._v(" "),a("TabPane",{attrs:{label:e.labelHeaders}},["row"===t.headersType?a("div",{key:"type1",staticClass:"request_inner"},[a("Row",{staticClass:"header_row"},[a("Col",{staticClass:"cell_item cell_item_first",attrs:{span:1}}),e._v(" "),a("Col",{staticClass:"cell_item",attrs:{span:11}},[e._v("Key")]),e._v(" "),a("Col",{staticClass:"cell_item",attrs:{span:11}},[e._v("Value")]),e._v(" "),a("Col",{staticClass:"cell_item cell_item_last",attrs:{span:1}})],1),e._v(" "),e._l(t.headers,function(s,r){return a("Row",{key:r},[a("Col",{staticClass:"cell_item cell_item_first",attrs:{span:1}},[a("Checkbox",{model:{value:s.active,callback:function(t){e.$set(s,"active",t)},expression:"h.active"}})],1),e._v(" "),a("Col",{staticClass:"cell_item",attrs:{span:11}},[a("Input",{staticClass:"no_border_input",attrs:{type:"text",placeholder:"请输入key"},model:{value:s.key,callback:function(t){e.$set(s,"key",t)},expression:"h.key"}})],1),e._v(" "),a("Col",{staticClass:"cell_item",attrs:{span:11}},[a("Input",{staticClass:"no_border_input",attrs:{type:"text",placeholder:"请输入value"},model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"h.value"}})],1),e._v(" "),a("Col",{staticClass:"cell_item cell_item_last",attrs:{span:1}},[r<t.headers.length-1?a("Icon",{staticClass:"item_remove_icon",attrs:{type:"ios-close",size:"20","data-index":r,"data-type":"headers"},on:{click:e.removeRequestLine}}):e._e(),e._v(" "),r===t.headers.length-1?a("Icon",{staticClass:"item_add_icon",attrs:{type:"ios-add",size:"20","data-type":"headers"},on:{click:e.addRequestLine}}):e._e()],1)],1)})],2):a("div",{key:"type2",staticClass:"request_inner"},[a("Input",{staticClass:"request_inner_textarea",attrs:{type:"textarea",placeholder:"请输入请求参数"},model:{value:t.textHeaders,callback:function(a){e.$set(t,"textHeaders",a)},expression:"item.textHeaders"}})],1)])],1)],1)]),e._v(" "),a("div",{staticClass:"demo-split-pane",attrs:{slot:"bottom"},slot:"bottom"},[a("div",{staticClass:"ajax_response_container",style:{fontSize:e.selectedFontSize+"px"},attrs:{id:"json-dest"},domProps:{innerHTML:e._s(e.formatJsonStr)}}),e._v(" "),a("div",{staticClass:"operation_container"},[a("div",{staticClass:"operation_item"},[a("Tooltip",{attrs:{content:"字体大小",placement:"bottom"}},[a("Dropdown",{staticClass:"custom_dropdown",attrs:{trigger:"hover",transfer:!0},on:{"on-click":e.changeFontSize}},[a("span",[e._v("F-"+e._s(e.selectedFontSize))]),e._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},e._l(e.allFontSize,function(t,s){return a("DropdownItem",{key:s,attrs:{name:t,selected:t==e.selectedFontSize}},[e._v(e._s(t))])}))],1)],1)],1),e._v(" "),a("div",{staticClass:"operation_item copy-format-json",attrs:{"data-clipboard-target":"#json-dest"}},[a("Tooltip",{attrs:{content:"复制",placement:"bottom"}},[a("Icon",{attrs:{type:"md-copy",size:"20"}})],1)],1)])])])],1)])}))],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ajax_header"},[t("h3",[this._v("Ajax网络请求")])])}]};var y=a("VU/8")(_,f,!1,function(e){a("Dudy")},"data-v-7dd941b1",null);t.default=y.exports}});
//# sourceMappingURL=25.9207c13235d68d225065.js.map