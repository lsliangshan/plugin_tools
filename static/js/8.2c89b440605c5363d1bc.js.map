{"version":3,"sources":["webpack:///src/components/tool/Image.vue","webpack:///./src/components/tool/Image.vue?4225","webpack:///./src/components/tool/Image.vue"],"names":["Clipboard","__webpack_require__","Image","name","data","reader","targetImage","colorThief","dominantColor","colors","computed","bodyStyles","this","$store","state","colorContainerStyles","height","created","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","loadScript","$nextTick","setTimeout","ColorThief","FileReader","initCopyColor","stop","methods","beforeUploadImage","f","_this2","that","readAsDataURL","onload","e","result","getImageDominantColor","promise_default","resolve","getColor","$refs","target","getImageColor","count","getPalette","clipboard","trigger","querySelector","on","text","trim","_msg","action","$Message","success","error","watch","val","_this3","_callee2","_context2","tool_Image","render","_vm","_h","$createElement","_c","_self","staticClass","style","backgroundColor","attrs","span","ref","src","alt","_v","staticStyle","type","accept","before-upload","color","size","_m","content","placement","_s","rgbToHex","_l","item","index","key","refInFor","_e","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/8.2c89b440605c5363d1bc.js","sourcesContent":["<template>\n  <div class=\"color_container\"\n       :style=\"colorContainerStyles\">\n    <div class=\"color_inner\">\n      <div class=\"top_container\">\n        <Row class=\"top_row\">\n          <Col :span=\"12\"\n               class=\"image_preview\"\n               :style=\"{backgroundColor: `rgb(${dominantColor[0]},${dominantColor[1]},${dominantColor[2]})`}\">\n          <img :src=\"targetImage\"\n               ref=\"target\"\n               alt=\"\">\n          </Col>\n          <Col :span=\"12\"\n               style=\"height: 100%;\">\n          <Upload type=\"drag\"\n                  accept=\"image/*\"\n                  :before-upload=\"beforeUploadImage\"\n                  action=\"/\">\n            <div class=\"upload_inner\">\n              <Icon type=\"ios-cloud-upload\"\n                    size=\"52\"\n                    style=\"color: #3399ff\"></Icon>\n              <p>点击或拖动图片上传</p>\n            </div>\n          </Upload>\n          </Col>\n        </Row>\n      </div>\n      <div class=\"bottom_container\"\n           v-if=\"targetImage\">\n        <div class=\"color_result\">\n          <div class=\"color_result_title\">\n            <h3>主色调</h3>\n          </div>\n          <div class=\"color_result_content\">\n            <Tooltip content=\"点击复制颜色\"\n                     placement=\"top\">\n              <div class=\"color_item\">\n                <div class=\"color_item_bg\"\n                     :style=\"{backgroundColor: `rgb(${dominantColor[0]},${dominantColor[1]},${dominantColor[2]})`}\"></div>\n                <div class=\"color_item_text\"\n                     ref=\"colorRef\">{{rgbToHex(`rgb(${dominantColor[0]},${dominantColor[1]},${dominantColor[2]})`)}}</div>\n              </div>\n            </Tooltip>\n          </div>\n        </div>\n        <div class=\"color_result\">\n          <div class=\"color_result_title\">\n            <h4>其它颜色</h4>\n          </div>\n          <div class=\"color_result_content\">\n            <Tooltip content=\"点击复制颜色\"\n                     placement=\"top\"\n                     v-for=\"(item, index) in colors\"\n                     :key=\"index\">\n              <div class=\"color_item\">\n                <div class=\"color_item_bg\"\n                     :style=\"{backgroundColor: `rgb(${item[0]},${item[1]},${item[2]})`}\"></div>\n                <div class=\"color_item_text\"\n                     ref=\"colorRef\">{{rgbToHex(`rgb(${item[0]},${item[1]},${item[2]})`)}}</div>\n              </div>\n            </Tooltip>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<style scoped>\n.color_container {\n  width: 100%;\n  padding: 15px;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.color_inner {\n  width: 1000px;\n  height: 100%;\n  overflow-y: auto;\n  border-radius: 4px;\n  padding: 15px;\n  box-sizing: border-box;\n  background-color: rgba(255, 255, 255, 0.9);\n}\n.top_container {\n  width: 100%;\n  height: 300px;\n}\n.top_row {\n  width: 100%;\n  height: 100%;\n}\n.image_preview {\n  height: 100%;\n  background-color: transparent;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: inset 0 60px rgba(255, 255, 255, 0.2),\n    inset 0 0 300px rgba(255, 255, 255, 0.1),\n    inset 50px -20px 0 rgba(255, 255, 255, 0.1),\n    inset -300px 120px rgba(255, 255, 255, 0.06);\n  -webkit-transition: background-color 0.25s;\n  transition: background-color 0.25s;\n}\n.image_preview img {\n  max-width: 100%;\n  max-height: 100%;\n}\n.upload_inner {\n  height: 100%;\n  display: inline-flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n.bottom_container {\n  width: 100%;\n  margin-top: 15px;\n}\n.color_result {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n}\n.color_result_content {\n  width: 100%;\n  height: 80px;\n  margin: 8px;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: center;\n}\n.color_item {\n  width: 80px;\n  height: 80px;\n  margin: 8px;\n  cursor: pointer;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: space-between;\n}\n.color_item_bg {\n  width: 80px;\n  height: 60px;\n  pointer-events: none;\n}\n.color_item_text {\n  width: 80px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-style: 13px;\n  pointer-events: none;\n}\n</style>\n<script>\n// import 'rgbaster.js'\n// require('../../../static/js/color-thief.min.js')\n// import '../../../static/js/color-thief.min.js'\n// const ColorThief = require('color-thief')\n// const thmclrx = require('thmclrx')\nconst Clipboard = require('clipboard')\nexport default {\n  name: 'image',\n  data () {\n    return {\n      reader: null,\n      targetImage: '',\n      colorThief: '',\n      dominantColor: '',\n      colors: []\n    }\n  },\n  computed: {\n    bodyStyles () {\n      return this.$store.state.bodyStyles\n    },\n    colorContainerStyles () {\n      return {\n        height: (this.bodyStyles.height - 65) + 'px'\n      }\n    }\n  },\n  async created () {\n    const that = this\n    await this.loadScript('/static/js/color-thief.min.js')\n    this.$nextTick(() => {\n      setTimeout(() => {\n        this.colorThief = new ColorThief()\n        this.reader = new FileReader()\n      }, 100)\n\n      this.initCopyColor()\n    })\n  },\n  methods: {\n    beforeUploadImage (f) {\n      const that = this\n      setTimeout(() => {\n        this.reader.readAsDataURL(f)\n        this.reader.onload = function (e) {\n          that.targetImage = this.result\n        }\n      }, 300)\n      return false\n    },\n    getImageDominantColor () {\n      // 获取图片主题色\n      const that = this\n      return new Promise((resolve) => {\n        that.dominantColor = that.colorThief.getColor(that.$refs.target)\n        resolve(true)\n      })\n    },\n    getImageColor (count) {\n      // 获取图片的其它颜色\n      const that = this\n      return new Promise((resolve) => {\n        that.colors = that.colorThief.getPalette(that.$refs.target, count || 10)\n        resolve(true)\n      })\n    },\n    initCopyColor () {\n      const that = this\n      const clipboard = new Clipboard('.color_item', {\n        target: function (trigger) {\n          return trigger.querySelector('.color_item_text')\n        }\n      })\n      clipboard.on('success', function (e) {\n        if (e.text.trim() !== '') {\n          let _msg = ''\n          if (e.action === 'copy') {\n            _msg = '复制成功'\n          } else if (e.action === 'cut') {\n            _msg = '剪切成功'\n          }\n          that.$Message.success(_msg)\n        }\n      })\n      clipboard.on('error', function (e) {\n        if (e.text.trim() !== '') {\n          let _msg = ''\n          if (e.action === 'copy') {\n            _msg = '复制失败'\n          } else if (e.action === 'cut') {\n            _msg = '剪切失败'\n          }\n          that.$Message.error(_msg)\n        }\n      })\n    }\n  },\n  watch: {\n    targetImage (val) {\n      if (val) {\n        setTimeout(async () => {\n          await this.getImageDominantColor()\n          await this.getImageColor()\n        })\n      }\n    }\n  }\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/tool/Image.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"color_container\",style:(_vm.colorContainerStyles)},[_c('div',{staticClass:\"color_inner\"},[_c('div',{staticClass:\"top_container\"},[_c('Row',{staticClass:\"top_row\"},[_c('Col',{staticClass:\"image_preview\",style:({backgroundColor: (\"rgb(\" + (_vm.dominantColor[0]) + \",\" + (_vm.dominantColor[1]) + \",\" + (_vm.dominantColor[2]) + \")\")}),attrs:{\"span\":12}},[_c('img',{ref:\"target\",attrs:{\"src\":_vm.targetImage,\"alt\":\"\"}})]),_vm._v(\" \"),_c('Col',{staticStyle:{\"height\":\"100%\"},attrs:{\"span\":12}},[_c('Upload',{attrs:{\"type\":\"drag\",\"accept\":\"image/*\",\"before-upload\":_vm.beforeUploadImage,\"action\":\"/\"}},[_c('div',{staticClass:\"upload_inner\"},[_c('Icon',{staticStyle:{\"color\":\"#3399ff\"},attrs:{\"type\":\"ios-cloud-upload\",\"size\":\"52\"}}),_vm._v(\" \"),_c('p',[_vm._v(\"点击或拖动图片上传\")])],1)])],1)],1)],1),_vm._v(\" \"),(_vm.targetImage)?_c('div',{staticClass:\"bottom_container\"},[_c('div',{staticClass:\"color_result\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"color_result_content\"},[_c('Tooltip',{attrs:{\"content\":\"点击复制颜色\",\"placement\":\"top\"}},[_c('div',{staticClass:\"color_item\"},[_c('div',{staticClass:\"color_item_bg\",style:({backgroundColor: (\"rgb(\" + (_vm.dominantColor[0]) + \",\" + (_vm.dominantColor[1]) + \",\" + (_vm.dominantColor[2]) + \")\")})}),_vm._v(\" \"),_c('div',{ref:\"colorRef\",staticClass:\"color_item_text\"},[_vm._v(_vm._s(_vm.rgbToHex((\"rgb(\" + (_vm.dominantColor[0]) + \",\" + (_vm.dominantColor[1]) + \",\" + (_vm.dominantColor[2]) + \")\"))))])])])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"color_result\"},[_vm._m(1),_vm._v(\" \"),_c('div',{staticClass:\"color_result_content\"},_vm._l((_vm.colors),function(item,index){return _c('Tooltip',{key:index,attrs:{\"content\":\"点击复制颜色\",\"placement\":\"top\"}},[_c('div',{staticClass:\"color_item\"},[_c('div',{staticClass:\"color_item_bg\",style:({backgroundColor: (\"rgb(\" + (item[0]) + \",\" + (item[1]) + \",\" + (item[2]) + \")\")})}),_vm._v(\" \"),_c('div',{ref:\"colorRef\",refInFor:true,staticClass:\"color_item_text\"},[_vm._v(_vm._s(_vm.rgbToHex((\"rgb(\" + (item[0]) + \",\" + (item[1]) + \",\" + (item[2]) + \")\"))))])])])}))])]):_vm._e()])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"color_result_title\"},[_c('h3',[_vm._v(\"主色调\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"color_result_title\"},[_c('h4',[_vm._v(\"其它颜色\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3ceb073c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tool/Image.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3ceb073c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Image.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Image.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Image.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3ceb073c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Image.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3ceb073c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tool/Image.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}