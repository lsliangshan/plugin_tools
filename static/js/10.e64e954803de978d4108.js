webpackJsonp([10],{ORy5:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("//Fk"),n=o.n(r),a=o("Xxa5"),i=o.n(a),s=o("exGp"),c=o.n(s),l=o("TQvf"),u={name:"image",data:function(){return{reader:null,targetImage:"",colorThief:"",dominantColor:"",colors:[]}},computed:{bodyStyles:function(){return this.$store.state.bodyStyles},colorContainerStyles:function(){return{height:this.bodyStyles.height-65+"px"}}},created:function(){var t=this;return c()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t,e.next=3,t.loadScript("/static/js/color-thief.min.js");case 3:t.$nextTick(function(){setTimeout(function(){t.colorThief=new ColorThief,t.reader=new FileReader},100),t.initCopyColor()});case 4:case"end":return e.stop()}},e,t)}))()},methods:{beforeUploadImage:function(t){var e=this,o=this;return setTimeout(function(){e.reader.readAsDataURL(t),e.reader.onload=function(t){o.targetImage=this.result}},300),!1},getImageDominantColor:function(){var t=this;return new n.a(function(e){t.dominantColor=t.colorThief.getColor(t.$refs.target),e(!0)})},getImageColor:function(t){var e=this;return new n.a(function(o){e.colors=e.colorThief.getPalette(e.$refs.target,t||10),o(!0)})},initCopyColor:function(){var t=this,e=new l(".color_item",{target:function(t){return t.querySelector(".color_item_text")}});e.on("success",function(e){if(""!==e.text.trim()){var o="";"copy"===e.action?o="复制成功":"cut"===e.action&&(o="剪切成功"),t.$Message.success(o)}}),e.on("error",function(e){if(""!==e.text.trim()){var o="";"copy"===e.action?o="复制失败":"cut"===e.action&&(o="剪切失败"),t.$Message.error(o)}})}},watch:{targetImage:function(t){var e=this;t&&setTimeout(c()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getImageDominantColor();case 2:return t.next=4,e.getImageColor();case 4:case"end":return t.stop()}},t,e)})))}}},d={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"color_container",style:t.colorContainerStyles},[o("div",{staticClass:"color_inner"},[o("div",{staticClass:"top_container"},[o("Row",{staticClass:"top_row"},[o("Col",{staticClass:"image_preview",style:{backgroundColor:"rgb("+t.dominantColor[0]+","+t.dominantColor[1]+","+t.dominantColor[2]+")"},attrs:{span:12}},[o("img",{ref:"target",attrs:{src:t.targetImage,alt:""}})]),t._v(" "),o("Col",{staticStyle:{height:"100%"},attrs:{span:12}},[o("Upload",{attrs:{type:"drag",accept:"image/*","before-upload":t.beforeUploadImage,action:"/"}},[o("div",{staticClass:"upload_inner"},[o("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),t._v(" "),o("p",[t._v("点击或拖动图片上传")])],1)])],1)],1)],1),t._v(" "),t.targetImage?o("div",{staticClass:"bottom_container"},[o("div",{staticClass:"color_result"},[t._m(0),t._v(" "),o("div",{staticClass:"color_result_content"},[o("Tooltip",{attrs:{content:"点击复制颜色",placement:"top"}},[o("div",{staticClass:"color_item"},[o("div",{staticClass:"color_item_bg",style:{backgroundColor:"rgb("+t.dominantColor[0]+","+t.dominantColor[1]+","+t.dominantColor[2]+")"}}),t._v(" "),o("div",{ref:"colorRef",staticClass:"color_item_text"},[t._v(t._s(t.rgbToHex("rgb("+t.dominantColor[0]+","+t.dominantColor[1]+","+t.dominantColor[2]+")")))])])])],1)]),t._v(" "),o("div",{staticClass:"color_result"},[t._m(1),t._v(" "),o("div",{staticClass:"color_result_content"},t._l(t.colors,function(e,r){return o("Tooltip",{key:r,attrs:{content:"点击复制颜色",placement:"top"}},[o("div",{staticClass:"color_item"},[o("div",{staticClass:"color_item_bg",style:{backgroundColor:"rgb("+e[0]+","+e[1]+","+e[2]+")"}}),t._v(" "),o("div",{ref:"colorRef",refInFor:!0,staticClass:"color_item_text"},[t._v(t._s(t.rgbToHex("rgb("+e[0]+","+e[1]+","+e[2]+")")))])])])}))])]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"color_result_title"},[e("h3",[this._v("主色调")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"color_result_title"},[e("h4",[this._v("其它颜色")])])}]};var f=o("VU/8")(u,d,!1,function(t){o("xc4s")},"data-v-3ceb073c",null);e.default=f.exports},xc4s:function(t,e){}});
//# sourceMappingURL=10.e64e954803de978d4108.js.map