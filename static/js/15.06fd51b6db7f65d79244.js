webpackJsonp([15],{Dd8w:function(t,e,s){"use strict";e.__esModule=!0;var a,i=s("woOf"),n=(a=i)&&a.__esModule?a:{default:a};e.default=n.default||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t}},b2QU:function(t,e){},hIjH:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Xxa5"),i=s.n(a),n=s("//Fk"),o=s.n(n),r=s("exGp"),l=s.n(r),c=s("Dd8w"),d=s.n(c),u=s("Du/2"),_=(s("0xDb"),s("VI/i")),p=s.n(_),m={name:"AudioPlayList",props:{data:{type:Array,default:function(){return[]}}},data:function(){return{}},methods:{goPlaylist:function(t){this.$router.push({name:"playlist",query:{id:t.target.dataset.id}})}},filters:{playCount:function(t){var e=Number(t);return e<1e4?Math.floor(e):(e/1e4).toFixed(1)+"万"}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t._m(0),t._v(" "),s("div",{staticClass:"content"},t._l(t.data,function(e,a){return s("div",{key:a,staticClass:"item",attrs:{"data-id":e.id},on:{click:t.goPlaylist}},[s("div",{staticClass:"item_image_container pen"},[s("img",{staticClass:"item_image",attrs:{src:e.picUrl}}),t._v(" "),s("div",{staticClass:"item_subtitle"},[s("Icon",{attrs:{type:"ios-headset",size:"16"}}),t._v(" "),s("span",{staticClass:"play_count"},[t._v(t._s(t._f("playCount")(e.playCount)))])],1)]),t._v(" "),s("div",{staticClass:"item_title pen"},[s("p",[t._v(t._s(e.name))])])])}))])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("p",[this._v("热门推荐")])])}]};var f=s("VU/8")(m,v,!1,function(t){s("kg1d")},"data-v-325b70ae",null).exports,g={name:"AudioDailyRecommend",props:{data:{type:Array,default:function(){return[]}}},data:function(){return{weekDay:"",date:""}},created:function(){var t=new Date;this.date=t.getDate();this.weekDay=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][t.getDay()]},methods:{goDiscoverRecommendTaste:function(){this.$router.push({name:"discover.recommend.taste"})},goPlaylist:function(t){this.$router.push({name:"playlist",query:{id:t.target.dataset.id}})}},filters:{playCount:function(t){var e=Number(t);return e<1e4?Math.floor(e):(e/1e4).toFixed(1)+"万"}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t._m(0),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"item"},[s("div",{staticClass:"item_image_container no_border"},[s("a",{staticClass:"item_image_a",attrs:{href:"javascript:void(0)"},on:{click:t.goDiscoverRecommendTaste}},[s("span",{staticClass:"head"},[t._v(t._s(t.weekDay))]),t._v(" "),s("span",{staticClass:"bd"},[t._v(t._s(t.date))]),t._v(" "),s("span",{staticClass:"mask"})])]),t._v(" "),t._m(1),t._v(" "),t._m(2)]),t._v(" "),t._l(t.data,function(e,a){return s("div",{key:a,staticClass:"item",attrs:{"data-id":e.id},on:{click:t.goPlaylist}},[s("div",{staticClass:"item_image_container pen"},[s("img",{staticClass:"item_image",attrs:{src:e.picUrl}}),t._v(" "),s("div",{staticClass:"item_subtitle"},[s("Icon",{attrs:{type:"ios-headset",size:"16"}}),t._v(" "),s("span",{staticClass:"play_count"},[t._v(t._s(t._f("playCount")(e.playcount)))])],1)]),t._v(" "),s("div",{staticClass:"item_title pen"},[s("p",[t._v(t._s(e.name))])]),t._v(" "),s("div",{staticClass:"item_desc pen"},[s("p",[t._v(t._s(e.copywriter))])])])})],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("p",[this._v("个性化推荐")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item_title"},[e("p",[this._v("每日歌曲推荐")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item_desc"},[e("p",[this._v("根据你的口味生成，每天6:00更新")])])}]};var y=s("VU/8")(g,h,!1,function(t){s("w2wM")},"data-v-0b13529d",null).exports,C=s("NYxO"),w={name:"audio",components:{PlayList:f,DailyRecommend:y},data:function(){return{audioCurrentTime:0,loginModal:{shown:!1,username:"",password:""},isLogin:!1,md5sum:{},recommendRadioList:[]}},computed:d()({},Object(C.b)({playList:function(t){return t.moduleNem.playList},dailyRecommendList:function(t){return t.moduleNem.dailyRecommendList}}),{localStorageKeys:function(){return this.$store.state.localStorageKeys},bodyStyles:function(){return this.$store.state.bodyStyles},audioContainerStyles:function(){return{height:this.bodyStyles.height-65+"px"}},audio:function(){return this.$store.state.audio},loginInfo:function(){return this.$store.state.nemLoginInfo}}),created:function(){var t=this;return l()(i.a.mark(function e(){var s,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.md5sum=p.a.createHash("md5"),s=t.$store.dispatch("moduleNem/init"),a=t.$store.dispatch("moduleNem/getPersonalizedPlayList"),o.a.all([s,a]);case 4:case"end":return e.stop()}},e,t)}))()},methods:{togglePlay:function(){this.audio.playing?this.$store.commit(u.u):this.$store.commit(u.v,{current:0})},getAudioProgress:function(){var t=this;setTimeout(function(){t.audio.ele.paused||(t.audioCurrentTime=t.audio.ele.currentTime.toFixed(1),t.getAudioProgress())},100)},login:function(){var t=this;return l()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLogin=!0,e.next=3,t.$store.dispatch("moduleNem/login",{username:t.loginModal.username,password:t.loginModal.password}).then(function(){var e=l()(i.a.mark(function e(s){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.isLogin=!1,t.$Message.success("登录成功"),t.loginModal.shown=!1;case 3:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){t.isLogin=!1,t.$Message.error(e.message),t.loginModal.shown=!1});case 3:case"end":return e.stop()}},e,t)}))()},logout:function(){this.$store.dispatch("moduleNem/logout")},showLoginModal:function(){this.loginModal.shown=!0}},filters:{getMusicName:function(t){return t?t.replace(/(.*)(\/([^\/\.])*)(\.(m4a)|(mp3))(.*)/,"$2").replace(/^\//,""):"未播放"},getMusicSuffix:function(t){return t?t.replace(/(.*)(\.(m4a)|(mp3))(.*)/,"$2").replace(/^\./,"").toUpperCase():"未播放"}},watch:{"audio.playing":function(t){t&&this.getAudioProgress()}}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"audio_container",style:t.audioContainerStyles},[s("div",{staticClass:"audio_inner"},[s("div",{staticClass:"main_content"},[t.loginInfo.userPoint&&t.loginInfo.userPoint.userId?s("daily-recommend",{attrs:{data:t.dailyRecommendList}}):t._e(),t._v(" "),s("play-list",{attrs:{data:t.playList}})],1),t._v(" "),s("div",{staticClass:"side_content"},[t.loginInfo.userPoint&&t.loginInfo.userPoint.userId?s("div",{staticClass:"side_login_box"},[s("div",{staticClass:"profile_header"},[s("div",{staticClass:"profile_avatar_container"},[s("img",{staticClass:"profile_avatar_image",attrs:{src:t.loginInfo.profile.avatarUrl}})]),t._v(" "),s("div",{staticClass:"profile_nickname_container"},[s("div",{staticClass:"profile_nickname"},[t._v(t._s(t.loginInfo.profile.nickname))]),t._v(" "),s("div",{staticClass:"profile_level"},[t._v("Lv. "),s("span",[t._v(t._s(t.loginInfo.level))])]),t._v(" "),s("Button",{attrs:{type:"error",ghost:"",long:"",size:"small"},on:{click:t.logout}},[t._v("退出登录")])],1)]),t._v(" "),s("div",{staticClass:"profile_bottom"},[s("div",{staticClass:"profile_bottom_item"},[s("span",[t._v(t._s(t.loginInfo.profile.eventCount))]),t._v(" "),s("span",[t._v("动态")])]),t._v(" "),s("div",{staticClass:"profile_bottom_item"},[s("span",[t._v(t._s(t.loginInfo.profile.follows))]),t._v(" "),s("span",[t._v("关注")])]),t._v(" "),s("div",{staticClass:"profile_bottom_item"},[s("span",[t._v(t._s(t.loginInfo.profile.followeds))]),t._v(" "),s("span",[t._v("粉丝")])])])]):s("div",{staticClass:"side_login_box"},[s("p",[t._v("登录网易云音乐，可以享受无限收藏的乐趣，并且无限同步到手机")]),t._v(" "),s("Button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary",ghost:"",long:"",size:"small"},on:{click:t.showLoginModal}},[t._v("登录网易云音乐")])],1)])]),t._v(" "),s("Modal",{staticClass:"nem_login_form",attrs:{width:"320"},model:{value:t.loginModal.shown,callback:function(e){t.$set(t.loginModal,"shown",e)},expression:"loginModal.shown"}},[s("p",{staticClass:"nem_login_title",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("登录")]),s("span",{staticClass:"login_type"},[t._v("【网易云音乐】")])]),t._v(" "),s("Form",[s("FormItem",[s("Input",{attrs:{type:"text",placeholder:"请输入网易云音乐账号"},model:{value:t.loginModal.username,callback:function(e){t.$set(t.loginModal,"username",e)},expression:"loginModal.username"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),t._v(" "),s("FormItem",[s("Input",{attrs:{type:"password",placeholder:"请输入网易云音乐密码"},model:{value:t.loginModal.password,callback:function(e){t.$set(t.loginModal,"password",e)},expression:"loginModal.password"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),t._v(" "),s("FormItem",[s("Button",{staticClass:"login_button",attrs:{type:"primary",long:"",disabled:!t.loginModal.username||!t.loginModal.password,loading:t.isLogin},on:{click:t.login}},[t.isLogin?s("span",[t._v("登录中...")]):s("span",[t._v("登录")])])],1)],1),t._v(" "),s("p",{staticClass:"nem_login_footer",attrs:{slot:"footer"},slot:"footer"},[s("a",{staticClass:"nem_login_other_type",attrs:{href:"javascript:void(0)"}},[s("Icon",{attrs:{type:"ios-arrow-back"}}),t._v(" "),s("span",[t._v("其它登录方式")])],1)])],1)],1)},staticRenderFns:[]};var M=s("VU/8")(w,b,!1,function(t){s("b2QU")},"data-v-c95043e4",null);e.default=M.exports},kg1d:function(t,e){},w2wM:function(t,e){}});
//# sourceMappingURL=15.06fd51b6db7f65d79244.js.map