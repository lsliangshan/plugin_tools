webpackJsonp([25],{"76GJ":function(e,t){},"Ip/H":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("//Fk"),r=n.n(a),s=n("Xxa5"),i=n.n(s),c=n("exGp"),o=n.n(c),u={name:"search-m",data:function(){var e=this;return{searchKey:"",currentPage:0,limit:30,totalCounts:0,songs:{},loadingData:!0,playingIndex:-1,inputing:!1,columns:[{title:"",key:"",width:80,render:function(t,n){var a=e;return t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},[t("span",n.index+1),t("div",{class:"item_play_container",style:{marginLeft:"5px",display:"flex",alignItems:"center",justifyContent:"center"}},[t("svg",{style:{width:"20px",height:"20px",fill:a.playingIndex===n.index?"#C20C0C":"#dadada",cursor:"pointer",transition:"all .2s ease-in-out"},on:{mouseenter:function(e){a.playingIndex!==n.index&&(e.target.style.fill="#333333")},mouseleave:function(e){a.playingIndex!==n.index&&(e.target.style.fill="#dadada")},click:function(e){a.playingIndex=Number(n.index),a.songs["page-"+a.currentPage][a.playingIndex].artists=a.songs["page-"+a.currentPage][a.playingIndex].ar,a.songs["page-"+a.currentPage][a.playingIndex].album=a.songs["page-"+a.currentPage][a.playingIndex].al,a.songs["page-"+a.currentPage][a.playingIndex].duration=a.songs["page-"+a.currentPage][a.playingIndex].dt,a.$eventHub.$emit(a.events.nemMusic.play,{from:"search",music:[a.songs["page-"+a.currentPage][a.playingIndex]]})}}},[t("use",{attrs:{"xlink:href":a.playingIndex===n.index?"#nem-pause":"#nem-play"}})])])])}},{title:"歌名",key:"name",width:200},{title:"时长",key:"duration",width:80,render:function(t,n){return t("span",e.formatDuration(n.row.dt))}},{title:"歌手",key:"artists",render:function(e,t){return e("span",t.row.ar[0].name)}},{title:"专辑",key:"album",render:function(e,t){return e("span",t.row.al.name)}}]}},computed:{bodyStyles:function(){return this.$store.state.bodyStyles},containerStyles:function(){return{height:this.bodyStyles.height-65+"px"}},totalPages:function(){return Math.ceil(this.totalCounts/this.limit)},offset:function(){return this.limit*this.currentPage},events:function(){return this.$store.state.events}},created:function(){var e=this;return o()(i.a.mark(function t(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t,e)}))()},methods:{formatDuration:function(e){var t=Number(e),n=Math.floor(t/36e5);n<10&&(n="0"+n);var a=Math.floor(t%36e5/6e4);a<10&&(a="0"+a);var r=Math.floor(t%6e4/1e3);return r<10&&(r="0"+r),("00"===n?"":n+":")+a+":"+r},searchMusic:function(){var e,t=this;return new r.a((e=o()(i.a.mark(function e(n){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.loadingData=!0,t.songs.hasOwnProperty("page-"+t.currentPage)){e.next=7;break}return e.next=4,t.$store.dispatch("moduleNem/searchMusic",{s:t.searchKey,offset:t.offset,limit:t.limit});case 4:a=e.sent,t.totalCounts=Math.min(600,a.result.songCount),t.songs["page-"+t.currentPage]=a.result.songs;case 7:t.loadingData=!1,n(!0);case 9:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},doSearch:function(){var e=this;return o()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.inputing=!1,e.currentPage=0,e.songs={},e.totalCounts=0,t.next=6,e.searchMusic();case 6:case"end":return t.stop()}},t,e)}))()},nextPage:function(){var e=this;return o()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.currentPage<e.totalPages-1)){t.next=4;break}return e.currentPage+=1,t.next=4,e.searchMusic();case 4:case"end":return t.stop()}},t,e)}))()},prevPage:function(){this.currentPage>0&&(this.currentPage-=1)},changePage:function(e){var t=this;return o()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.currentPage=e-1,n.next=3,t.searchMusic();case 3:case"end":return n.stop()}},n,t)}))()},inputSearchKey:function(){this.inputing=!0}},watch:{"$route.query.s":{immediate:!0,handler:function(e){var t=this;return o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.searchKey=t.$route.query.s,e.next=3,t.doSearch();case 3:case"end":return e.stop()}},e,t)}))()}}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container",style:e.containerStyles},[n("div",{staticClass:"inner"},[n("div",{staticClass:"main_content"},[n("div",{staticClass:"m-search"},[n("Input",{staticClass:"custom-input",attrs:{search:"","enter-button":"",size:"large",placeholder:"搜索音乐"},on:{"on-enter":e.doSearch,"on-search":e.doSearch,input:e.inputSearchKey},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}})],1),e._v(" "),n("div",{staticClass:"m-bd"},[n("div",{staticClass:"m-bd-title"},[e._v("\n\t\t\t\t\t搜索“"+e._s(e.searchKey)+"”\n\t\t\t\t\t"),n("transition",{attrs:{name:"search-result-transition","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[e.inputing?e._e():n("span",[e._v("，找到 "),n("span",{staticStyle:{color:"rgb(79, 192, 141)"}},[e._v(e._s(e.totalCounts))]),e._v(" 首单曲")])])],1),e._v(" "),n("div",{staticClass:"m-bd-table"},[n("Table",{attrs:{stripe:"",loading:e.loadingData,columns:e.columns,data:e.songs["page-"+e.currentPage]}})],1),e._v(" "),n("transition",{attrs:{name:"page-transition","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"}},[e.totalCounts>0?n("div",{staticClass:"m-bd-page"},[n("Page",{staticClass:"music_search_page",attrs:{total:e.totalCounts,"page-size":e.limit,"show-elevator":""},on:{"on-change":e.changePage}})],1):e._e()])],1)])])])},staticRenderFns:[]};var d=n("VU/8")(u,l,!1,function(e){n("76GJ")},"data-v-4e670b7d",null);t.default=d.exports}});
//# sourceMappingURL=25.ed8886e11127bf1cd067.js.map