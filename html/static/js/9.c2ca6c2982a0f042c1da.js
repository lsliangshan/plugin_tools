webpackJsonp([9],{ZzOL:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("//Fk"),o=e.n(a),n=e("Xxa5"),r=e.n(n),i=e("exGp"),c=e.n(i),l=e("smLj"),u={name:"Cmd",data:function(){return{audio:{src:"",el:null,volume:50},cmdPrefix:"~ root# ",shown:!1,currentCommand:"",allCommands:["help","go","clear","reload","audio","play","stop"],consoleStyles:{color:{label:"rgb(79, 192, 141)",normal:"#cccccc",success:"#19be6b",warning:"#ff9900",error:"#ed4014"}},allRoutePath:[],historyConsoles:[],historyCommands:[],activeHistoryIndex:-1}},mounted:function(){this.audio.el=document.getElementById("cmd_audio"),this.allRoutePath=this.getAllRoutePath()},methods:{toggleCmdContainer:function(){this.shown=!this.shown},keyupHandler:function(t){38===t.keyCode?(this.activeHistoryIndex=(this.activeHistoryIndex-1+this.historyCommands.length)%this.historyCommands.length,this.currentCommand=this.historyCommands[this.activeHistoryIndex]):40===t.keyCode&&(this.activeHistoryIndex=(this.activeHistoryIndex+1)%this.historyCommands.length,this.currentCommand=this.historyCommands[this.activeHistoryIndex])},sendCommand:function(){var t=this;return c()(r.a.mark(function s(){return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t.currentCommand&&t.currentCommand.trim()){s.next=2;break}return s.abrupt("return");case 2:return t.historyConsoles.push({type:"user",text:'<span style="color: '+t.consoleStyles.color.label+';">'+t.cmdPrefix+"</span> "+t.currentCommand}),s.next=5,t.dealWithCommand(t.currentCommand.trim());case 5:t.historyCommands[t.historyCommands.length-1]!==t.currentCommand.trim()&&(t.historyCommands.push(t.currentCommand.trim()),t.activeHistoryIndex=t.historyCommands.length),t.currentCommand="",t.scrollToConsoleBottom();case 8:case"end":return s.stop()}},s,t)}))()},autoReply:function(t){var s="normal";t.status&&this.consoleStyles.color.hasOwnProperty(t.status)&&(s=t.status),this.historyConsoles.push({type:"reply",text:'<span style="color: '+this.consoleStyles.color[s]+';">'+t.text+"</span>"})},getCommandName:function(t){return t.split(" ")[0]},getCommandArgs:function(t){var s=t.split(" ");return s.shift(),s},getAllRoutePath:function(){var t=[];l.a.hasOwnProperty("name")&&t.push(l.a.name);for(var s=0;s<l.a.children.length;s++)l.a.children[s].hasOwnProperty("name")&&t.indexOf(l.a.children[s].name)<0&&t.push(l.a.children[s].name);return t},dealWithCommand:function(t){var s=this;return new o.a(function(e){var a=s.getCommandName(t);s.allCommands.indexOf(a)<0&&(s.autoReply({status:"error",text:"命令 <b>"+a+'</b> 不存在<br/><span style="color: #cccccc;">输入 help 查看帮助</span>'}),e(!0));var o=s.getCommandArgs(t);switch(a){case"clear":s.clearConsole();break;case"go":s.commandGo({args:o});break;case"help":s.commandHelp();break;case"reload":s.commandReload();break;case"audio":s.commandAudio({args:o});break;case"play":s.commandPlay({args:o});break;case"stop":s.commandStop()}e(!0)})},commandGo:function(t){!t.args||t.args.length<1?this.autoReply({status:"normal",text:"请输入待跳转的路由名称："+this.allRoutePath.join("、")+"<br/>例如：go home"}):this.allRoutePath.indexOf(t.args[0])<0?this.autoReply({status:"warning",text:"路由 <b>"+t.args[0]+'</b> 不存在<br/><span style="color: #ccc;">请输入待跳转的路由名称：'+this.allRoutePath.join("、")+'</span><br/><span style="color: #ccc;">例如：go home</span>'}):this.$router.replace({name:t.args[0]})},commandHelp:function(){this.autoReply({status:"normal",text:"可用命令包括："+this.allCommands.join("、")})},commandReload:function(){this.$router.go(0)},commandAudio:function(t){if(!t.args||t.args.length<1)this.autoReply({status:"error",text:"请输入操作名，可用的操作名包括：play、stop、volume、set"});else switch(t.args.shift()){case"play":this.commandPlay({args:t.args});break;case"stop":case"pause":this.commandStop();break;case"restart":this.commandRestart();break;case"get":this.audioGetOp({args:t.args});break;case"set":this.audioSetOp({args:t.args});break;case"volume":this.audioGetVolume()}},audioGetOp:function(t){if(!t.args||t.args.length<0)this.autoReply({status:"error",text:"请输入想获取的属性，如 volume"});else switch(t.args.shift()){case"volume":this.audioGetVolume()}},audioSetOp:function(t){if(!t.args||t.args.length<0)this.autoReply({status:"error",text:"请输入想设置的属性，如 volume"});else switch(t.args.shift()){case"volume":this.audioSetVolume(t.args.shift())}},audioGetVolume:function(){this.autoReply({status:"normal",text:"当前音量："+100*this.audio.el.volume})},audioSetVolume:function(t){this.audio.el.volume=(parseFloat(t)/100).toFixed(2),this.autoReply({status:"success",text:"音量已经设置为："+t})},commandPlay:function(t){var s=this;!t.args||t.args.length<1?this.autoReply({status:"warning",text:"未指定音频资源"}):(this.audio.src=t.args[0],setTimeout(function(){s.audio.el.play(),s.autoReply({status:"success",text:"正在播放: "+t.args[0].substring(t.args[0].lastIndexOf("/")+1,t.args[0].lastIndexOf("."))})},1))},commandStop:function(){this.audio.el.pause(),this.autoReply({status:"success",text:"音乐已经暂停"})},commandRestart:function(){this.audio.el.play(),this.autoReply({status:"success",text:"继续播放: "+this.audio.src.substring(this.audio.src.lastIndexOf("/")+1,this.audio.src.lastIndexOf("."))})},clearConsole:function(){this.historyConsoles=[{type:"user",text:'<span style="color: '+this.consoleStyles.color.label+';">'+this.cmdPrefix+"</span> clear"}]},scrollToConsoleBottom:function(){setTimeout(function(){document.querySelector(".window_cmd_console").scrollTo(0,1e4)},10)}}},m={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"window_cmd_container"},[e("div",{staticClass:"window_cmd_inner",class:{show:t.shown}},[e("div",{staticClass:"window_cmd_toggle_container"},[e("div",{staticClass:"window_cmd_toggle",on:{click:t.toggleCmdContainer}},[e("Icon",{attrs:{type:"md-hammer",size:"20"}})],1)]),t._v(" "),e("div",{staticClass:"window_cmd_content"},[e("div",{staticClass:"window_cmd_console"},[t._l(t.historyConsoles,function(s,a){return e("div",{key:a,staticClass:"window_cmd_console_item",class:s.type},[e("div",{staticClass:"window_cmd_console_item_inner",domProps:{innerHTML:t._s(s.text)}})])}),t._v(" "),e("div",{staticClass:"blank_div",staticStyle:{height:"15px"}})],2),t._v(" "),e("div",{staticClass:"window_cmd_input"},[e("span",[t._v(t._s(t.cmdPrefix))]),t._v(" "),e("Input",{attrs:{type:"text",size:"large"},on:{"on-enter":t.sendCommand,"on-keyup":t.keyupHandler},model:{value:t.currentCommand,callback:function(s){t.currentCommand=s},expression:"currentCommand"}})],1)])]),t._v(" "),e("audio",{staticStyle:{width:"0",height:"0"},attrs:{id:"cmd_audio",src:t.audio.src}})])},staticRenderFns:[]};var d=e("VU/8")(u,m,!1,function(t){e("lxZb")},"data-v-a02bb3fe",null);s.default=d.exports},lxZb:function(t,s){}});
//# sourceMappingURL=9.c2ca6c2982a0f042c1da.js.map